<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoChat Studio Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
</head>

<body>
    <div id="app">
        <!-- Sidebar: Project List -->
        <aside id="sidebar">
            <div class="brand">
                <h1>ü§ñ AutoChat</h1>
                <span class="badge-pro">PRO</span>
            </div>

            <button id="btn-new-story" class="btn-primary-full">+ New Story</button>

            <a href="characters.html" class="menu-item">
                üé≠ Manage Characters
            </a>

            <a href="sounds.html" class="menu-item">
                üîä Sound Library
            </a>

            <a href="brain.html" class="menu-item">
                üß† Brain (Memory)
            </a>

            <div class="story-counter" id="story-counter">
                <span class="counter-icon">üìä</span>
                <span class="counter-text">
                    <strong id="story-count">0</strong> Stories
                </span>
            </div>

            <div class="dialogue-counter" id="dialogue-counter" style="display: none;">
                <span class="counter-icon">üí¨</span>
                <span class="counter-text">
                    <strong id="dialogue-count">0</strong> Dialogues
                </span>
            </div>

            <div class="project-list" id="project-list">
                <!-- Projects go here -->
                <div class="project-item active">
                    <span class="status-dot draft"></span>
                    <div class="project-info">
                        <h3>Loading...</h3>
                        <span>Just now</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Editor -->
        <main id="editor-area">
            <header class="top-bar">
                <div class="breadcrumbs">
                    <input type="text" id="current-project-title" value="Select a project" readonly
                        style="background: transparent; border: none; color: white; font-size: 1.2rem; font-weight: 600; cursor: pointer; outline: none;">
                    <button id="btn-edit-title"
                        style="background: transparent; border: none; color: var(--text-gray); cursor: pointer; font-size: 1rem; margin-left: 8px; display: none;">‚úèÔ∏è</button>
                    <span class="status-badge" id="current-project-status">DRAFT</span>

                    <!-- Room Name Editor -->
                    <div style="margin-left: 20px; display: inline-flex; align-items: center; gap: 6px;">
                        <span style="color: var(--text-gray); font-size: 0.9rem;">üí¨</span>
                        <input type="text" id="room-name-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó"
                            style="background: var(--bg-dark); border: 1px solid var(--border); color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.9rem; width: 150px;">
                    </div>

                    <!-- Visibility Toggles (Simplified) -->
                    <div
                        style="margin-left: 15px; display: inline-flex; align-items: center; gap: 10px; border-left: 1px solid var(--border); padding-left: 15px;">
                        <label
                            style="color: var(--text-gray); font-size: 0.8rem; display: flex; align-items: center; gap: 5px; cursor: pointer;"
                            title="Show Partner Name">
                            <input type="checkbox" id="toggle-partner-name" checked>
                            <span>L-Name</span>
                        </label>
                        <label
                            style="color: var(--text-gray); font-size: 0.8rem; display: flex; align-items: center; gap: 5px; cursor: pointer;"
                            title="Show My Name">
                            <input type="checkbox" id="toggle-my-name">
                            <span>R-Name</span>
                        </label>
                    </div>
                </div>
                <div class="actions">
                    <button id="btn-generate-ai" class="btn-secondary">AI ‚ú®</button>
                    <!-- <button id="btn-save" class="btn-secondary">Save</button> -->
                    <button id="btn-export-json" class="btn-secondary">Export üì¶</button>
                    <button id="btn-import-json" class="btn-secondary">Import üì•</button>
                    <button id="btn-save-memory" class="btn-secondary" title="Save story to character memory">üß† Save
                        Memory</button>
                    <button id="btn-render" class="btn-primary">Render üé¨</button>
                </div>
            </header>

            <div class="workspace">
                <!-- Dialogue Editor (Left) -->
                <div class="script-editor">
                    <div id="dialogue-list">
                        <!-- Dialogue Items go here -->
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button id="btn-add-dialogue" class="btn-dashed" style="flex: 1;">+ Add Dialogue</button>
                        <button id="btn-open-giphy" class="btn-dashed"
                            style="flex: 1; border-color: #ec4899; color: #ec4899;">üß∏ Add GIF</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <button id="btn-continue-ai" class="btn-dashed"
                            style="width: 100%; background: linear-gradient(135deg, #4f46e520, #9333ea20); border-color: #9333ea;">‚ú®
                            Continue with AI</button>
                    </div>
                </div>

                <!-- Preview (Right) -->
                <div class="preview-pane">
                    <!-- View Mode Toggle -->
                    <div class="view-mode-toggle">
                        <span class="toggle-label">View Mode:</span>
                        <div class="toggle-switch" id="tiktok-mode-toggle" onclick="toggleTiktokMode()">
                            <span class="toggle-option" data-mode="normal">Normal</span>
                            <span class="toggle-option active" data-mode="tiktok">TikTok</span>
                            <div class="toggle-slider"></div>
                        </div>
                    </div>

                    <div class="phone-mockup">
                        <iframe id="preview-frame" src="../visualizer/index.html"></iframe>
                    </div>
                    <div class="preview-controls">
                        <button onclick="reloadPreview()" class="btn-replay">
                            <span>‚Üª</span> Replay
                        </button>
                    </div>

                    <!-- Audio Settings -->
                    <div class="audio-settings">
                        <div class="audio-settings-header">
                            üîä Audio Settings
                            <a href="sounds.html" class="link-small">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‚Üí</a>
                        </div>

                        <!-- BGM Row -->
                        <div class="audio-control-row">
                            <div class="audio-control-left">
                                <span class="audio-icon">üéµ</span>
                                <span class="audio-label">BGM</span>
                            </div>
                            <div class="audio-control-right">
                                <select id="select-bgm" onchange="onBgmChange()">
                                    <option value="">‡∏õ‡∏¥‡∏î</option>
                                </select>
                                <input type="range" class="volume-slider" id="volume-bgm" min="0" max="100" value="18"
                                    oninput="onBgmVolumeChange(this.value); document.getElementById('vol-bgm-label').textContent = this.value + '%'">
                                <span id="vol-bgm-label" class="volume-label">18%</span>
                                <button class="audio-toggle-btn active" id="toggle-bgm" onclick="toggleBgm()"
                                    title="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î">
                                    <span class="toggle-on">üîä</span>
                                    <span class="toggle-off">üîá</span>
                                </button>
                            </div>
                        </div>

                        <!-- SFX Row -->
                        <div class="audio-control-row">
                            <div class="audio-control-left">
                                <span class="audio-icon">üóØÔ∏è</span>
                                <span class="audio-label">Pop</span>
                            </div>
                            <div class="audio-control-right">
                                <select id="select-sfx" onchange="onSfxChange()">
                                    <option value="">‡∏õ‡∏¥‡∏î</option>
                                </select>
                                <input type="range" class="volume-slider" id="volume-sfx" min="0" max="100" value="75"
                                    oninput="onSfxVolumeChange(this.value); document.getElementById('vol-sfx-label').textContent = this.value + '%'">
                                <span id="vol-sfx-label" class="volume-label">75%</span>
                                <button class="audio-toggle-btn active" id="toggle-sfx" onclick="toggleSfx()"
                                    title="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î">
                                    <span class="toggle-on">üîä</span>
                                    <span class="toggle-off">üîá</span>
                                </button>
                            </div>
                        </div>

                        <!-- Swoosh Row (Intro Transition) -->
                        <div class="audio-control-row">
                            <div class="audio-control-left">
                                <span class="audio-icon">üí®</span>
                                <span class="audio-label">Swoosh</span>
                            </div>
                            <div class="audio-control-right">
                                <select id="select-swoosh" onchange="onSwooshChange()">
                                    <option value="">‡∏õ‡∏¥‡∏î</option>
                                </select>
                                <input type="range" class="volume-slider" id="volume-swoosh" min="0" max="100"
                                    value="55"
                                    oninput="onSwooshVolumeChange(this.value); document.getElementById('vol-swoosh-label').textContent = this.value + '%'">
                                <span id="vol-swoosh-label" class="volume-label">55%</span>
                            </div>
                        </div>
                    </div>

                    <!-- GIF / Sticker Button -->

                </div>
            </div>
    </div>
    </main>
    </div>

    <!-- Modal for New Story -->
    <div id="modal-new-story" class="modal hidden">
        <div class="modal-content">
            <h2>Create New Story</h2>
            <p style="color: var(--text-gray); margin: 20px 0;">Create a blank story and add dialogues manually, or use
                AI to generate content.</p>
            <div class="modal-options-grid"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <button id="btn-create-blank" class="option-card"
                    style="padding: 30px; border: 2px solid var(--border); background: var(--bg-dark); border-radius: 12px; cursor: pointer; transition: all 0.2s; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">üìù</div>
                    <h3 style="color: white; margin-bottom: 5px;">Blank Story</h3>
                    <p style="color: var(--text-gray); font-size: 0.9rem;">Start from scratch</p>
                </button>

                <button id="btn-create-ai" class="option-card"
                    style="padding: 30px; border: 2px solid var(--primary); background: rgba(147, 51, 234, 0.1); border-radius: 12px; cursor: pointer; transition: all 0.2s; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚ú®</div>
                    <h3 style="color: white; margin-bottom: 5px;">Generate with AI</h3>
                    <p style="color: var(--text-gray); font-size: 0.9rem;">Auto-create plot & dialogue</p>
                </button>
            </div>
            <button id="btn-cancel-create" class="btn-text"
                style="display: block; margin: 20px auto 0; background: none; border: none; color: var(--text-gray); cursor: pointer; text-decoration: underline;">Cancel</button>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="modal-confirm" class="modal hidden">
        <div class="modal-content">
            <h2 id="confirm-title">Confirm Action</h2>
            <p id="confirm-message" style="color: var(--text-gray); margin: 20px 0; line-height: 1.6;">Are you sure?</p>
            <div class="modal-actions">
                <button id="btn-cancel-confirm" class="btn-secondary">Cancel</button>
                <button id="btn-confirm-action" class="btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- Story Settings Modal -->
    <div id="modal-story-settings" class="modal hidden">
        <div class="modal-content modal-wide">
            <h2>Generate with AI</h2>

            <div class="form-group">
                <label>Characters (Select at least 2)</label>
                <div class="character-selector">
                    <!-- Javascript will populate this -->
                    <div style="color: var(--text-gray); font-style: italic; padding: 10px;">Select custom characters...
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Story Topic / Prompt (Optional)</label>
                <textarea id="custom-prompt" rows="3" placeholder="e.g., ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡∏´‡∏≤‡∏´‡∏°‡∏≠‡∏ü‡∏±‡∏ô"
                    style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px; font-family: inherit; resize: vertical;"></textarea>
            </div>

            <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                    <label>Mood & Tone</label>
                    <select id="story-category"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                        <option value="auto">üåä Natural / Auto (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</option>
                        <option value="funny">üòÇ Funny (‡∏ï‡∏•‡∏Å)</option>
                        <option value="drama">üò¢ Drama (‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤)</option>
                        <option value="horror">üëª Horror (‡∏ú‡∏µ)</option>
                        <option value="office">üíº Office (‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®)</option>
                        <option value="love">üíï Love (‡∏£‡∏±‡∏Å)</option>
                        <option value="gossip">ü§´ Gossip (‡πÄ‡∏°‡πâ‡∏≤‡∏ó‡πå‡∏°‡∏≠‡∏¢)</option>
                        <option value="consult">üí≠ Consult (‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤)</option>
                        <option value="fight">üò§ Fight (‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞)</option>
                        <option value="debate">üó£Ô∏è Debate (‡∏ñ‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô)</option>
                        <option value="tie_in">üí∞ Natural Tie-in (‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á)</option>
                    </select>
                </div>
                <div>
                    <label>Relationship</label>
                    <select id="story-relationship"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                        <option value="friend">üë• Friend (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</option>
                        <option value="close_friend">ü§ô Close Friend (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏ô‡∏¥‡∏ó ‡∏Å‡∏π/‡∏°‡∏∂‡∏á)</option>
                        <option value="colleague">üíº Colleague (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô)</option>
                        <option value="couple">üíï Couple (‡πÅ‡∏ü‡∏ô)</option>
                        <option value="stranger">ü§ù Stranger (‡∏Ñ‡∏ô‡πÅ‡∏õ‡∏•‡∏Å‡∏´‡∏ô‡πâ‡∏≤)</option>
                        <option value="enemy">üò† Enemy (‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏î)</option>
                    </select>
                </div>
            </div>
            <small style="color: var(--text-gray);">Relationship ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà AI ‡πÉ‡∏ä‡πâ (‡∏Å‡∏π/‡∏°‡∏∂‡∏á vs ‡∏Ñ‡∏∏‡∏ì/‡∏Ñ‡∏£‡∏±‡∏ö)</small>


            <div class="modal-actions">
                <button id="btn-cancel-settings" class="btn-secondary">Cancel</button>
                <button id="btn-confirm-settings" class="btn-primary">Generate with AI ‚ú®</button>
            </div>
        </div>
    </div>

    <!-- Character Selector Modal -->
    <div id="modal-character-selector" class="modal hidden">
        <div class="modal-content">
            <h2 id="char-selector-title">Choose Character</h2>
            <div id="character-selector-grid" class="character-grid-selector">
                <!-- Javascript will populate this -->
            </div>
            <div class="modal-actions">
                <button id="btn-cancel-char-select" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- AI Continue Settings Modal -->
    <div id="modal-continue-settings" class="modal hidden">
        <div class="modal-content" style="width: 100%; max-width: 1200px;">
            <h2>‚ú® AI Story Continuation</h2>
            <p class="modal-subtitle">Let AI write the next scene for you.</p>

            <div class="form-group">
                <label>Who is in this scene?</label>
                <div class="character-selector" id="continue-character-selector">
                    <!-- Checkboxes injected here -->
                </div>
            </div>

            <!-- New Controls: Length & Mode & Relationship -->
            <div class="form-group" style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:15px;">
                <div>
                    <label>Length</label>
                    <select id="continue-length"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                        <option value="short">Short (5-10 lines)</option>
                        <option value="medium" selected>Medium (10-20 lines)</option>
                        <option value="long">Long (20+ lines)</option>
                    </select>
                </div>
                <div>
                    <label>Mode</label>
                    <select id="continue-mode"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                        <option value="normal" selected>Normal Flow</option>
                        <option value="wrap_up">Wrap Up / Conclusion</option>
                        <option value="relation">Relationship Focus (Deep Talk)</option>
                    </select>
                </div>
                <div>
                    <label>Relationship</label>
                    <select id="continue-relationship"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                        <option value="friend" selected>üë• Friend</option>
                        <option value="close_friend">ü§ô Close (‡∏Å‡∏π/‡∏°‡∏∂‡∏á)</option>
                        <option value="colleague">üíº Colleague</option>
                        <option value="couple">üíï Couple</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>What happens next? (Optional)</label>
                <textarea id="continue-prompt"
                    placeholder="e.g. They start arguing about money... or They suddenly hear a loud noise..." rows="3"
                    style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;"></textarea>
            </div>

            <div class="modal-actions">
                <button id="btn-cancel-continue" class="btn-secondary">Cancel</button>
                <button id="btn-generate-continue" class="btn-primary">Generate Preview ü§ñ</button>
            </div>
        </div>
    </div>

    <!-- AI Preview Modal -->
    <div id="modal-ai-preview" class="modal hidden">
        <div class="modal-content" style="max-width: 500px;">
            <h2>AI Suggestion</h2>
            <div id="ai-preview-stats" style="color: var(--text-gray); font-size: 0.85rem; margin-bottom: 10px;">
                <!-- Stats will be injected here -->
            </div>
            <div id="ai-preview-list" class="preview-list-scroll">
                <!-- Generated dialogues appear here -->
            </div>
            <div class="modal-actions" style="flex-wrap: wrap; gap: 10px;">
                <button id="btn-cancel-preview" class="btn-secondary">Discard</button>
                <button id="btn-retry-preview" class="btn-secondary">üîÑ Try Again</button>
                <button id="btn-split-parts" class="btn-secondary" style="display: none;">‚úÇÔ∏è Split into Parts</button>
                <button id="btn-confirm-preview" class="btn-primary">‚úÖ Add to Story</button>
            </div>
        </div>
    </div>

    <!-- Render Range Modal (Export Range for TikTok Parts) -->
    <div id="modal-render-range" class="modal hidden">
        <div class="modal-content" style="max-width: 450px;">
            <h2>üé¨ Render Video</h2>
            <p class="modal-subtitle" id="render-range-info">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Dialogue Range ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Render</p>

            <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                    <label>Start Dialogue</label>
                    <input type="number" id="render-start" min="1" value="1"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                </div>
                <div>
                    <label>End Dialogue</label>
                    <input type="number" id="render-end" min="1" value="15"
                        style="width: 100%; padding: 10px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 6px;">
                </div>
            </div>

            <div id="render-range-parts"
                style="background: var(--bg-dark); border-radius: 8px; padding: 12px; margin: 15px 0;">
                <!-- Parts suggestion will be injected here -->
            </div>

            <div class="modal-actions">
                <button id="btn-cancel-render-range" class="btn-secondary">Cancel</button>
                <button id="btn-render-all" class="btn-secondary">üé¨ Render All</button>
                <button id="btn-render-range" class="btn-primary">üé¨ Render Range</button>
            </div>
        </div>
    </div>


    <div id="modal-import-json" class="modal hidden">
        <div class="modal-content" style="max-width: 600px;">
            <h2>üì• Import JSON (Restore)</h2>
            <p class="modal-subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ó‡∏µ‡πà Export ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</p>

            <div class="form-group">
                <label for="import-file-input" class="file-upload-label"
                    style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; border: 2px dashed var(--border); border-radius: 12px; cursor: pointer; transition: all 0.2s; background: var(--bg-dark);">
                    <span style="font-size: 3rem; margin-bottom: 10px;">üìÇ</span>
                    <span style="color: var(--text-gray);">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á</span>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </label>
            </div>

            <div id="import-preview" style="display: none;">
                <div style="background: var(--bg-dark); border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                    <h4 style="margin: 0 0 10px 0; color: white;">üìã Preview</h4>
                    <div id="import-preview-content" style="color: var(--text-gray); font-size: 0.9rem;"></div>
                </div>

                <div class="form-group">
                    <label style="color: var(--text-gray); margin-bottom: 10px; display: block;">Import Mode:</label>
                    <div style="display: flex; gap: 10px;">
                        <label
                            style="flex: 1; padding: 15px; border: 2px solid var(--border); border-radius: 8px; cursor: pointer; text-align: center; transition: all 0.2s;"
                            class="import-mode-option selected" data-mode="new">
                            <input type="radio" name="import-mode" value="new" checked style="display: none;">
                            <div style="font-size: 1.5rem; margin-bottom: 5px;">‚ûï</div>
                            <div style="color: white; font-weight: 600;">‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà</div>
                            <div style="color: var(--text-gray); font-size: 0.8rem;">Import ‡πÄ‡∏õ‡πá‡∏ô Story ‡πÉ‡∏´‡∏°‡πà</div>
                        </label>
                        <label
                            style="flex: 1; padding: 15px; border: 2px solid var(--border); border-radius: 8px; cursor: pointer; text-align: center; transition: all 0.2s;"
                            class="import-mode-option" data-mode="replace">
                            <input type="radio" name="import-mode" value="replace" style="display: none;">
                            <div style="font-size: 1.5rem; margin-bottom: 5px;">üîÑ</div>
                            <div style="color: white; font-weight: 600;">‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà Project ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
                            <div style="color: var(--text-gray); font-size: 0.8rem;">‡∏•‡∏ö dialogues ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏•‡∏∞ Import ‡πÉ‡∏´‡∏°‡πà
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button id="btn-cancel-import" class="btn-secondary">Cancel</button>
                <button id="btn-confirm-import" class="btn-primary" disabled>Import üì•</button>
            </div>
        </div>
    </div>


    <div id="modal-giphy-picker" class="modal hidden">
        <div class="modal-content" style="max-width: 600px; height: 80vh; display: flex; flex-direction: column;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin: 0;">üß∏ Add Sticker/GIF</h2>
                <button id="btn-close-giphy"
                    style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
            </div>

            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <input type="text" id="giphy-search-input" placeholder="Search GIPHY (e.g. funny cat, shocked)..."
                    style="flex: 1; padding: 12px; background: var(--bg-dark); border: 1px solid var(--border); color: white; border-radius: 8px;">
                <button id="btn-search-giphy" class="btn-primary">üîç Search</button>
            </div>

            <div id="giphy-results"
                style="flex: 1; overflow-y: auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding-right: 5px;">
                <!-- GIFs will render here -->
                <div style="grid-column: 1/-1; text-align: center; color: var(--text-gray); margin-top: 50px;">
                    Search to find GIFs...
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <script src="../config/timing-frontend.js"></script>
    <script src="editor.js?v=6.1"></script>
</body>


</html>